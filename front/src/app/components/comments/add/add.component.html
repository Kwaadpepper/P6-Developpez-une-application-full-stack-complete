<div class="container-fluid">
  <div class="row justify-center">
    <div class="lg:col-12 xl:col-8">
      <p-panel>
        <form class="row" [formGroup]="form" (ngSubmit)="onSubmit()">
          <div class="col md:col-10">
            <p-message styleClass="mb-3" *ngIf="viewModel.formErrorMessage()" severity="error">{{
              viewModel.formErrorMessage()
              }}</p-message>

            <p-tabs value="editor">
              <p-tablist>
                <p-tab value="editor" title="Rédiger le commentaire">Commentaire</p-tab>
                <p-tab value="preview" title="Prévisualiser le commentaire">Prévisualiser</p-tab>
              </p-tablist>
              <p-tabpanels>
                <p-tabpanel value="editor">
                  <small id="content-help" *ngIf="form.controls.content.dirty || form.controls.content.touched"
                    class="text-error">
                    <span class="block" *ngIf="form.controls.content.hasError('required')"> Obligatoire.</span>
                    <span class="block" *ngIf="viewModel.errors.content()">{{ viewModel.errors.content() }}</span>
                  </small>
                  <textarea formControlName="content" pTextarea [autoResize]="true" class="w-full min-h-40"></textarea>
                </p-tabpanel>
                <p-tabpanel value="preview">
                  <p-scrollpanel [style]="{ width: '100%' }">
                    <div markdown [data]="viewModel.content()" ngPreserveWhitespaces></div>
                  </p-scrollpanel>
                </p-tabpanel>
              </p-tabpanels>
            </p-tabs>
          </div>
          <div class="col sm:pt-28">
            <p-button class="my-6 block text-center" variant="outlined" severity="contrast" [disabled]="!form.valid "
              type="submit">
              <span pButtonLabel>
                <i class="pi pi-send"></i>
              </span>
            </p-button>
          </div>
        </form>
      </p-panel>
    </div>
  </div>
</div>